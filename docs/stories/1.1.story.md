# Story 1.1 – Initialize Monorepo & Tooling

## Status

Approved

## Story

**As a** frontend UI command SDK maintainer,
**I want** a monorepo with core apps and packages wired with TypeScript, linting, and formatting,
**so that** I can develop, test, and demonstrate the SDK, demo app, and mocks consistently and efficiently.

## Acceptance Criteria

From PRD Epic 1 – SDK Foundations & Infrastructure:

1. AC1: Monorepo with workspaces linking `sdk`, `demo`, and `mocks` packages is set up.
2. AC2: ESLint (React + TypeScript) and Prettier configurations run cleanly across all packages.
3. AC3: TypeScript strict-mode builds succeed for each package.

## Tasks / Subtasks

- [ ] Task 1 – Initialize monorepo and workspace structure (AC: 1)
  - [ ] Create root `package.json` configured for npm workspaces linking `apps/demo`, `apps/mocks`, `packages/sdk`, `packages/shared`, and `packages/config`.  
        [Source: architecture/project-structure.md#project-structure--workflow]
  - [ ] Add `turbo.json` (or equivalent task runner config) to coordinate builds, tests, and dev servers across workspaces.  
        [Source: architecture/project-structure.md#project-structure--workflow]
  - [ ] Ensure repository layout matches the documented structure (apps, packages, docs, infrastructure, GitHub workflows).  
        [Source: architecture/project-structure.md#project-structure--workflow]

- [ ] Task 2 – Configure ESLint and Prettier across all packages (AC: 2)
  - [ ] Add shared ESLint config for React + TypeScript and apply it to `apps/demo`, `apps/mocks`, `packages/sdk`, and `packages/shared`.  
        [Source: prd/epic-details.md#epic-1--sdk-foundations--infrastructure]
  - [ ] Add a shared Prettier configuration and ensure it is picked up by all workspaces.  
        [Source: prd/epic-details.md#epic-1--sdk-foundations--infrastructure]
  - [ ] Add root npm scripts (e.g., `lint`, `format`) that delegate to workspace-specific scripts so they can be run from the monorepo root.  
        [Source: architecture/project-structure.md#project-structure--workflow]
  - [ ] Verify `npm run lint` (or equivalent) runs cleanly across all packages with no errors.  
        [Source: prd/epic-details.md#epic-1--sdk-foundations--infrastructure]

- [ ] Task 3 – Configure TypeScript strict builds (AC: 3)
  - [ ] Add shared base `tsconfig.base.json` with strict TypeScript settings and extend it in each workspace (`apps/demo`, `apps/mocks`, `packages/sdk`, `packages/shared`).  
        [Source: architecture/overview-and-modules.md#overview]
  - [ ] Ensure path mapping and module resolution support the documented module boundaries (`packages/sdk`, `packages/shared`, `apps/demo`, `apps/mocks`).  
        [Source: architecture/overview-and-modules.md#module-boundaries]
  - [ ] Add workspace-level build scripts (e.g., `tsc --build` or framework-specific build commands) and verify strict builds succeed for each package.  
        [Source: prd/epic-details.md#epic-1--sdk-foundations--infrastructure]

- [ ] Task 4 – Monorepo developer experience setup (AC: 1, 2, 3)
  - [ ] Document standard dev flows in `README.md` at the repo root: install, run dev, run mocks, run tests.  
        [Source: architecture/project-structure.md#project-structure--workflow]
  - [ ] Configure convenient root-level scripts to start demo and mocks together for local development.  
        [Source: architecture/project-structure.md#project-structure--workflow]
  - [ ] Ensure the structure and scripts are compatible with CI workflow expectations (e.g., `ci.yml` using lint, test, and build commands).  
        [Source: architecture/project-structure.md#project-structure--workflow]

## Dev Notes

### Previous Story Insights

No previous stories exist; this is the first story (1.1) in Epic 1.

### Implementation Playbook (Dev Agent)

Follow these steps when executing this story:

1. **Monorepo & workspace skeleton**
   - Create root `package.json` with npm workspaces linking:
     - `apps/demo`
     - `apps/mocks`
     - `packages/sdk`
     - `packages/shared`
     - `packages/config` (if used)
   - Add `turbo.json` (or equivalent) with basic pipelines for `build`, `lint`, `test`, and `dev`.
   - Ensure the folder layout matches `docs/architecture/project-structure.md`.

2. **ESLint + Prettier across workspaces**
   - Add shared React + TypeScript ESLint config and apply it to `apps/demo`, `apps/mocks`, `packages/sdk`, and `packages/shared`.
   - Add shared Prettier config and ensure all workspaces pick it up.
   - Add root scripts (e.g., `lint`, `format`) that delegate to workspace scripts.
   - Run lint from the root and fix issues until all packages are clean.

3. **TypeScript strict builds**
   - Add `tsconfig.base.json` at the root with strict TypeScript options.
   - Make each workspace `tsconfig.json` extend the base config and support the documented module boundaries.
   - Add `build` scripts per workspace and a root `build` pipeline.
   - Run builds for all workspaces and fix TS errors until strict builds succeed.

4. **Developer experience & CI alignment**
   - Add root scripts to start demo and mocks (e.g., `dev:demo`, `dev:mocks`).
   - Ensure the structure and scripts are compatible with CI expectations (install, lint, test, build).
   - Add or update README at the repo root with basic instructions: install, run dev, run mocks, run tests, run build.

When updating this story, only modify the Tasks/Subtasks and Dev Notes sections as needed to reflect reality; leave QA Results to the QA agent.

### Data Models

No specific data models are required for monorepo initialization. Data and API schemas will be addressed in later stories that implement SDK commands and integration points.

### Data Models

No specific data models are required for monorepo initialization. Data and API schemas will be addressed in later stories that implement SDK commands and integration points.

### API Specifications

No runtime APIs are implemented in this story. API routes (e.g., mock AI endpoints) and WebSocket servers are introduced in later epics and stories.

### Component Specifications

This story does not introduce UI components; it only establishes the monorepo and tooling that later UI and SDK components will rely on.

### File Locations & Structure

Follow the documented project structure for the target repository:

- Root layout, including `apps/`, `packages/`, `docs/`, `infrastructure/`, `.github/workflows/`, `package.json`, `turbo.json`, and `README.md`.  
  [Source: architecture/project-structure.md#project-structure--workflow]
- Monorepo context: SDK, demo app, and mock services live in `packages/` and `apps/` as described in the architecture.  
  [Source: architecture/overview-and-modules.md#overview]

### Testing Requirements

- Ensure that the monorepo structure and TypeScript configuration support future test commands such as:
  - `npm run test -- --filter=sdk`
  - `npm run test -- --filter=demo`
  - `npm run test -- --filter=mocks`
  - `npm run test:e2e`  
  [Source: architecture/project-structure.md#project-structure--workflow]
- For this story, the primary testing requirement is that linting and TypeScript builds can run successfully from the root and within each workspace.

### Technical Constraints & Considerations

- Use Node.js 18+ and TypeScript 5+ in strict mode as the baseline runtime/tooling.  
  [Source: architecture/overview-and-modules.md#overview]
- Ensure the monorepo layout and scripts are compatible with expected deployment targets (e.g., Vercel CI/CD).  
  [Source: architecture/overview-and-modules.md#overview]

## Testing

- Verify that from the monorepo root you can:
  - Install dependencies once with the chosen package manager.
  - Run lint commands and have them delegate across workspaces.
  - Run strict TypeScript builds for SDK, demo, and mocks.
- Confirm that these commands are suitable for use in CI workflows.

## Change Log

| Date       | Version | Description                                  | Author |
| ---------- | ------- | -------------------------------------------- | ------ |
| 2025-11-14 | 0.1.0   | Initial draft of Story 1.1 and task breakdown | SM     |

## Dev Agent Record

_This section is reserved for the Dev Agent to fill in during implementation (agent model, debug log references, completion notes, and file list)._ 

## QA Results

### QA Validation Playbook

When this story is ready for QA review:

1. **Verify Acceptance Criteria directly**
   - AC1: Confirm workspaces exist and are wired by running installation from the root and listing workspaces.
   - AC2: Run the root lint command and verify it completes successfully across all packages.
   - AC3: Run the root build (or per-workspace builds) and confirm TypeScript strict builds succeed.

2. **Check architecture alignment**
   - Compare the final repo layout to `docs/architecture/project-structure.md` and note any intentional deviations in QA notes.

3. **Assess DX & CI readiness**
   - From a clean checkout, follow the README instructions to install, run dev, run mocks, run tests, and run build.
   - Call out any gaps or confusing steps in QA notes.

4. **Record QA result**
   - Summarize findings here with a brief status (READY / NEEDS REVISION / BLOCKED) and specific issues or follow-ups.

_This section is reserved for the QA Agent to record validation results and gate decisions for this story._
